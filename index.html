<div class="poles-list" id="polesContainer">
  <p>Chargement des pôles...</p>
</div>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const res = await fetch("https://opensheet.elk.sh/1AfYExJcJEJVw6hOmPUUkBXBnbC16MM9vu453MpVLIpw/Emplois_du_temps");
    const data = await res.json();

    const poles = [...new Set(data.map(d => d["pôle"]))];
    const container = document.getElementById("polesContainer");
    container.innerHTML = "";

    poles.forEach(p => {
      const btn = document.createElement("button");
      btn.className = "card";
      btn.textContent = p;
      btn.onclick = () => {
        saveSelection('pole', p); // Save selected pole
        window.location.href = `specialites.html?p=${encodeURIComponent(p)}`;
      };
      container.appendChild(btn);
    });
  });
</script>
